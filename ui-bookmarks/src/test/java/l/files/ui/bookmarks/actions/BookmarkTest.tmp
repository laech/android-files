package l.files.ui.bookmarks.actions;

public final class BookmarkTest {
    
    @Test
    public void on_prepare_checks_menu_item_if_file_is_bookmarked() {
        testOnPrepareUpdatesMenuItemCheckState(true);
    }
    
    @Test
    public void on_prepare_unchecks_menu_item_if_file_is_not_bookmarked() {
        testOnPrepareUpdatesMenuItemCheckState(false);
    }
    
    private void testOnPrepareUpdatesMenuItemCheckState(boolean bookmarked) {
        given(bookmarks.contains(file)).willReturn(bookmarked);
        action.onPrepareOptionsMenu(menu);
        verify(item).setChecked(bookmarked);
    }

    @Test
    public void on_click_adds_file_to_bookmarks_if_file_is_not_already_bookmarked() {
        testOnClickBookmark(false);
    }
    
    @Test
    public void on_click_removes_file_from_bookmarks_if_file_is_already_bookmarked() {
        testOnClickBookmark(true);
    }
    
    private void testOnClickBookmark(boolean alreadyBookmarkedBeforeClick) {
        item.setChecked(alreadyBookmarkedBeforeClick);
        action.onItemSelected(item);
        verify(item).setChecked(!alreadyBookmarkedBeforeClick);
        verify(bookmarks).setBookmarked(file, !alreadyBookmarkedBeforeClick);
    }

}
